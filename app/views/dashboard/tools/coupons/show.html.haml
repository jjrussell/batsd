- @page_title = "Coupon - #{@coupon.name}"

%h1= @page_title
%table#coupons_table.tablesorter
  %thead
    %tr
      %th Name
      %th Type
      %th Discount Value
      %th Created
      %th Start
      %th Expiration
      %th Vouchers?
      %th Edit
      %th Delete
      %th Enable
  %tbody
    %tr
      %td= link_to(@coupon.name, statz_path(@coupon))
      %td= @coupon.discount_type
      %td= @coupon.discount_type == "currency" ? number_to_currency(@coupon.discount_value.to_f) : @coupon.discount_value
      %td.nowrap= @coupon.created_at.to_s(:pub)
      %td.nowrap= @coupon.start_date.to_s(:pub)
      %td.nowrap= @coupon.end_date.to_s(:pub)
      - if permitted_to?(:show, :dashboard_tools_vouchers)
        %td.nowrap= @coupon.vouchers.any? ? link_to('Yes', tools_voucher_path(:id => @coupon.id)) : 'No'
      - if permitted_to?(:edit, :dashboard_tools_coupons)
        %td= link_to('Edit', edit_tools_coupon_path(:id => @coupon.id))
      - if permitted_to?(:destroy, :dashboard_tools_coupons)
        %td= link_to('Remove', tools_coupon_path(:id => @coupon.id), :method => :delete, :confirm => 'Are you sure you want to remove this coupon?')
      - if permitted_to?(:toggle_enabled, :dashboard_tools_coupons)
        %td= @coupon.enabled? ? link_to('Disable', toggle_enabled_tools_coupon_path(:id => @coupon.id), :method => :put) : link_to('Enable', toggle_enabled_tools_coupon_path(:id => @coupon.id), :method => :put)

- content_for :page_styles do
  :plain
    table.tablesorter {
      border-collapse: separate;
    }
    .offer {
      display: inline-block;
      padding-right: 10px;
      padding-top: 5px;
    }
    .nowrap {
      white-space: nowrap;
    }
    .act_as_button {
      font-size: 10px!important;
      padding:2px!important;
    }
    .agency {
      color: red;
    }
    .icon {
      max-width: 60px;
      overflow: hidden;
    }
