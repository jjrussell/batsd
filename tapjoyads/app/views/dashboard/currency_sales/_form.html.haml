%p
  Please note that the start time and end time will be recorded in
  %span.timezone #{current_user.time_zone}
  time zone.

= form_for [@app, @currency, @currency_sale], :html => { :class => 'tjform' } do |f|
  %table.currency_form
    %tr
      %th
        = f.label :start_time, 'Start Time'
        #help_start_time.help ?
      %td
        = f.text_field :start_time, :value => @currency_sale.start_time.present? ? @currency_sale.start_time.to_s(:mdy_ampm) : ''
        = error_message_on @currency_sale, :start_time
    %tr
      %th
        = f.label :end_time, 'End Time'
        #help_end_time.help ?
      %td
        = f.text_field :end_time, :value => @currency_sale.end_time.present? ? @currency_sale.end_time.to_s(:mdy_ampm) : ''
        = error_message_on @currency_sale, :end_time
    %tr
      %th
        = f.label :multiplier, 'Multiplier Amount'
        #help_multiplier.help ?
      %td
        = f.select(:multiplier, options_for_select(CurrencySale::MULTIPLIER_SELECT, @currency_sale.multiplier.present? ? @currency_sale.multiplier.to_f : 1.5))
        = error_message_on @currency_sale, :multiplier
    %tr
      %th
        = f.label :message_enabled, 'Enable Lightbox & Message?'
        #help_message_enabled.help ?
      %td
        = f.check_box :message_enabled
    %tr.message_enabled{:class => @currency_sale.message_enabled? ? '' : 'hidden' }
      %th
        = f.label :message, 'Currency Sale Message'
        #help_message.help ?
      %td
        = f.text_area :message, :size => '20x10', :placeholder => 'Leave blank for the default message as below.'
        .details
          %i Default Message: #{I18n.t('text.currency.no_message_set', :currency_name => @currency.name)}
        = error_message_on(@currency_sale, :message)
    %tr
      %td{ :colspan => 2 }= f.submit 'Save Currency Sale'

.hidden
  #help_start_time_content{ :name => 'Start Time' } #{I18n.t('text.currency_sale.help_start_time')}
  #help_end_time_content{ :name => 'End Time' } #{I18n.t('text.currency_sale.help_end_time')}
  #help_multiplier_content{ :name => 'Multiplier' } #{I18n.t('text.currency_sale.help_multiplier')}
  #help_message_content{:name => 'Display Message'} #{I18n.t('text.currency_sale.help_message')}
  #help_message_enabled_content{:name => 'Enable Message?'} #{I18n.t('text.currency_sale.help_message_enabled')}

- content_for :included_javascripts, javascript_include_tag('jquery-ui-timepicker-addon.min')

- content_for :page_javascript do
  = set_tapjoy_timezone_skew
  :plain
    $(function() {
      $('#currency_sale_start_time').datetimepicker({
        ampm: true,
        timeFormat: 'h:mm TT'
      });
      $('#currency_sale_end_time').datetimepicker({
        ampm: true,
        timeFormat: 'h:mm TT'
      });
      $('#currency_sale_message_enabled').click(function() {
          $('.message_enabled').toggle($(this).attr('checked'));
      });
    });

- content_for :page_styles do
  :plain
    span.timezone {
      font-weight: bold;
      color: #44a;
      background-color: #ff0;
    }

    checkbox {
      float: left;
    }

    textarea {
      height: 34px;
    }

    textarea,
    input[type=text] {
      width: 400px;
    }

    #currency_sale_message_enabled {
      float: left;
    }

    .currency_form {
      width: 680px;
    }

    .details {
      font-size: 12px;
    }

    select {
      float: left;
      margin-left: 5px;
      width: 70px;
    }
