- @page_title = 'Employees'

%h1 Employees

= link_to '[Add new employee]', new_tools_employee_path
= link_to '[Show all employees]', '#', :class => 'show_all'
%br

%table#employees_table.tablesorter
  %thead
    %tr
      %th Image
      %th Active?
      %th Seat
      %th Name
      %th Title
      %th Email/Edit
  %tbody
    - @employees.each do |employee|
      %tr{ :class => employee.active? ? '' : 'inactive' }
        %td= link_to(image_tag(employee.get_photo_url, :alt => employee.photo_alt_name), edit_tools_employee_path(employee))
        %td= employee.active ? "Yes" : "No"
        %td
          = employee.department.to_s.titleize
          = location_str(employee)
        %td= employee.full_name
        %td= employee.title
        %td= link_to employee.email, edit_tools_employee_path(employee)

- content_for :page_styles do
  :plain
    table.tablesorter {
      border-collapse: separate;
    }
    tr.inactive {
      display: none;
    }
    table.tablesorter th.up_arrow {
      background-position: 100% 50%;
      background-repeat: no-repeat;
      background-image: url(/stylesheets/themes/blue/asc.gif);
      background-color: #8DBDD8;
    }

- content_for :page_javascript do
  :plain
    $(function() {
      $("#employees_table").tablesorter({
        widgets: ['zebra'],
        headers: {
          0: { sorter: false },
          7: { sorter: false }
        }
      });
      $('.show_all').click(function(){
        $('tr.inactive').show();
        return false;
      });
    });
