- @page_title = 'Network Costs'

%h1 Network Costs

%h4 Current Costs: #{number_to_currency(@current_costs / 100.0)}

= link_to('Create New', new_tools_network_cost_path)

%table#costs_table.tablesorter
  %thead
    %tr
      %th First Effective On
      %th Last Effective On
      %th Amount
      %th Notes
      %th Created
  %tbody
    - @costs.each do |cost|
      %tr
        %td= cost.first_effective_on
        %td= cost.first_effective_on + 29.days
        %td= number_to_currency(cost.amount / 100.0)
        %td= cost.notes
        %td= cost.created_at.to_s(:mdy_ampm)

- content_for :page_javascript do
  :plain
    $(function() {
      $.tablesorter.addParser({
        id: 'date-column',
        is: function(s) { return false; },
        type: 'numeric',
        format: function(s) {
          return new Date(s).getTime();
        }
      });
      $.tablesorter.addParser({
        id: 'currency-column',
        is: function(s) { return false; },
        type: 'numeric',
        format: function(s) {
          return s.replace(/\$/g, '').replace(/,/g, '');
        }
      });
      $("#costs_table").tablesorter({
        widgets: ['zebra'],
        headers: {
          0:  { sorter: 'date-column' },
          1:  { sorter: 'date-column' },
          2:  { sorter: 'currency-column' },
          3:  { sorter: false },
          4:  { sorter: 'date-column' }
        },
        sortList: [ [4, 1] ]
      });
    });
