- @page_title = 'Account Creation'

%h1 Registration

%p
  This is the registration page for Advertisers and Developers. If you're looking for a way to find cool apps, head over to our
  = succeed '!' do
    = link_to('website', WEBSITE_URL)

- form_for(:user, @user, :url => { :action => :create }, :html => { :method => :post, :class => 'tjform' }) do |f|
  %table
    %tr
      %th
        = f.label :email, 'Email Address'
        #help_email.help ?
      %td
        = f.text_field :email
        = error_message_on @user, :email
    %tr
      %th
        = label_tag :partner_name, 'Company Name'
        #help_company_name.help ?
      %td
        = text_field_tag :partner_name, params[:partner_name], :size => 30
        = error_message_on @user.current_partner, :name
    %tr
      %th= f.label :password, 'Password'
      %td
        = f.password_field :password
        = error_message_on @user, :password
    %tr
      %th= f.label :password_confirmation, 'Confirm Password'
      %td
        = f.password_field :password_confirmation
        = error_message_on @user, :password_confirmation
    %tr
      %th
        = f.label :time_zone, 'Time Zone'
        #help_time_zone.help ?
      %td
        = f.time_zone_select :time_zone, ActiveSupport::TimeZone.all
        = error_message_on @user, :time_zone
    %tr
      %th= f.label :country, 'Country'
      %td
        = f.country_select :country
        = error_message_on @user, :country
    %tr
      %td &nbsp;
      %td
        = check_box_tag :account_type_advertiser
        = label_tag :account_type_advertiser, 'I am an Advertiser'
    %tr
      %td &nbsp;
      %td
        = check_box_tag :account_type_publisher
        = label_tag :account_type_publisher, 'I am a Publisher'
    %tr
      %td &nbsp;
      %td.terms
        = f.check_box :terms_of_service
        = f.label :terms_of_service, 'I Agree to the Tapjoy Terms of Service:'
        = link_to 'Advertiser', '/tos-advertiser.html', :target => '_blank'
        = link_to 'Publisher', '/tos-publisher.html', :target => '_blank'
        = link_to 'Publisher Guidelines', '/publisher-guidelines.html', :target => '_blank'
        = error_message_on @user, :terms_of_service
    %tr
      %td{ :colspan => 2 }= f.submit "Create Account"

.hidden
  #help_email_content{ :name => 'Email Address' } Your preferred contact email address. Password reset requests will go to this address and you will use it to login.
  #help_company_name_content{ :name => 'Company Name' } The name of your company.
  #help_time_zone_content{ :name => 'Time Zone' } All times will be displayed in this time zone with the exception of daily stats, which are always in Universal Time (UTC).

- if @user.new_record?
  - content_for :page_javascript do
    :plain
      var zones = #{@zones.to_json};
      var offset = new Date(Date.parse('2011-01-01')).getTimezoneOffset();
      $('#user_time_zone').val(zones[offset])

- content_for :page_styles do
  :plain
    .terms {
      font-size: 12px;
    }
