- @page_title = "Offer Whitelist"

%h1 Offer Whitelist

-# - form_tag(activities_path, :method => :get, :id => 'form', :class => 'tjform') do
  -# = label_tag(:user)
  -# = text_field_tag(:user, params[:user], :size => 15)
  -# = label_tag(:object_id)
  -# = text_field_tag(:object_id, params[:object_id], :size => 15)
  -# = label_tag(:request_id)
  -# = text_field_tag(:request_id, params[:request_id], :size => 15)
  -# = label_tag(:partner_id)
  -# = text_field_tag(:partner_id, params[:partner_id], :size => 15)
  -# = submit_tag("Change")

%table#whitelist_table.tablesorter
  %thead
    %tr
      %th Offer Icon
      %th Offer Name
      %th Platform
      %th Offer status
      %th Action
  %tbody
    - @offers.each do |offer| 

      %tr
        %td
          %img.app_icon{ :src => offer.get_icon_url(:source => :cloudfront, :size => '57') }
        %td
          .offer-text #{offer.name}
        %td
          - offer.get_device_types.each do |d|
            .offer-text  #{d} #{image_tag(d == "android" ? 'icon_android.png' : 'icon_apple.png')} 
        %td 
          - if @whitelisted_apps.include?(offer.id)
            .approved-text Approved
          - else 
            .blocked-text Blocked
        %td
          - if @whitelisted_apps.include?(offer.id)
            = link_to '[Block]', pubwhitelist_disable_path(:offerid => offer.id), :method => :disable, :confirm => "Are you sure you want to Block this Offer: #{offer.name}"
          - else 
            = link_to '[Approve]', pubwhitelist_enable_path(:offerid => offer.id), :method => :enable, :confirm => "Are you sure you want to Approve this Offer: #{offer.name}"
                


- content_for :page_styles do
  :plain
    table.tablesorter {
      margin-top: 40px;
    }
    
    h1 {
      margin-bottom: 0;
    }
    
    form {
      background: white;
      border: 1px solid black;
      padding: 3px;
      position: absolute;
    }
    
    .next {
      float: right;
    }
    
    .tjform input[type=submit] {
      margin: 0;
      float: none;
    }
    
    .bold {
      font-weight: bold;
    }
    
    .offer-text { color: #686868; display: table-cell; font-size: 14px; height: 57px; margin: 0; padding-right: 7px; position: relative; top: 10px; vertical-align: middle; }
    
    .blocked-text { color: red; display: table-cell; font-size: 14px; height: 57px; margin: 0; padding-right: 7px; position: relative; top: 10px; vertical-align: middle; }
    
    .approved-text { color: green; display: table-cell; font-size: 14px; height: 57px; margin: 0; padding-right: 7px; position: relative; top: 10px; vertical-align: middle; }


