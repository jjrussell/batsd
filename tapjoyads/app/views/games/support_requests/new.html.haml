#support-request.current
  .content
    %h1.museo
      - if params[:type] === "feedback"
        = t('text.games.feedback')
      - elsif params[:type] === "report_bug"
        = t('text.games.report_bug')
      - elsif params[:type] === "contact_support"
        = t('text.games.contact_support')
      - else
        = t('text.games.contact_us')
    .support-form
      - form_for('support_requests', :url => { :action => 'create' } ) do |f|
        .field
          - if params[:type].present?
            = hidden_field_tag :type, params[:type]
          - else
            = hidden_field_tag :type, "contact_support"
          = f.text_area :content, :rows => 5, :value => params[:content], :class => 'ui-joy-input'
        .field
          .button-group
            = button_to_function t('text.shared.cancel'), 'history.go(-1)', :class => 'button'
            = f.submit t('text.shared.submit'), :class => 'button disabled'
        .form-error.center

- content_for :page_javascript do
  :plain
    $(window).load(function() {
      var canProceed = false;
      $('.ui-joy-input').keypress(function() {
        if ($(this).val() != '') {
          $('.button.disabled').removeClass('disabled');
          canProceed = true;
        }
        else {
          $('.button.disabled').addClass('disabled');
          canProceed = false;
        }
      });
      $('form').submit(function(e){
        if (!canProceed) {
          e.preventDefault();
        }
        else {
          e.run();
        }
      });
    });
