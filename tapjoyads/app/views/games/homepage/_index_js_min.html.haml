$(window).load(function(){var C=new $.jQTouch({slideSelector:"#jqt .slide_nav",});var E=TJG.utils.getParam("register_device");if(E.indexOf("true")!=-1){TJG.utils.centerDialog("#register_device");$("#register_device").fadeIn(350)}if(TJG.vars.isIos||TJG.vars.isSafari){TJG.ui.showAddHomeDialog()}$("#earn .vertical-scroll").swipe(function(G,H){TJG.utils.hideURLBar()});function B(){$(".get_offerwall_jsonp").each(function(){var G=0;$(this).click(function(){TJG.ui.showLoader();$("#earn_content").fadeOut(450,function(){$("#earn_content").empty();C.goTo("#earn","slideleft")});var J=$(this).attr("jsonp_url");var K=$(this).attr("id");var I=$(this).attr("app_name");var M=$(this).attr("currency");if(!TJG.appOfferWall[K]){TJG.appOfferWall[K]={}}TJG.appOfferWall[K]["jsonp_url"]=J;var L='Viewing offers for <span class="bold">'+I+"</span>";$("#app_title").html(L);$("#app_title").show();if(J){if(!TJG.appOfferWall[K]["offers"]){C.goTo("#earn","slideleft");$("html, body").animate({scrollTop:0},800);$.ajax({url:J+"&callback=?",dataType:"json",timeout:15000,success:function(T){TJG.ui.hideLoader();if(T.OfferArray){var R=T.OfferArray;offerOffset=R.length;if(T.MoreDataAvailable){TJG.appOfferWall[K]["offers_left"]=T.MoreDataAvailable}else{TJG.appOfferWall[K]["offers_left"]=0}TJG.appOfferWall[K]["offset"]=offerOffset;TJG.appOfferWall[K]["offers"]=R;var P=TJG.ui.getOffferRow(R,M);var Q=['<ul id="offerwall_id-',K,'">',P,"</ul>",];if(TJG.appOfferWall[K]["offers_left"]>0){Q.push('<div class="more_button_wrapper"><div class="get_more_apps" app_id="'+K+'"><div class="get_more_apps_content">Load More</div></div></div>')}else{Q.push('<div class="more_button_wrapper"><div class="back_to_top grey_button"><div class="grey_button_content">Back to Top</div></div></div>');$(".back_to_top").click(function(){$("html, body").animate({scrollTop:0},"slow")})}Q=Q.join("");$("#earn_content").html(Q);$("#earn_content").fadeIn(500);var O=false;var S=false;$(".get_more_apps").click(function(){if(O){return }$(".get_more_apps_content").html('<div class="image_loader"></div>');var V=$(this).attr("app_id");$(".load_more_loader").show();if(TJG.appOfferWall[V]["offers_left"]>0){var U=TJG.appOfferWall[V]["jsonp_url"];U=U+"&start="+TJG.appOfferWall[V]["offset"]+"&max=25&callback=?";O=true;$.ajax({url:U,dataType:"json",timeout:15000,success:function(Z){if(Z.OfferArray){var W=Z.OfferArray;if(Z.MoreDataAvailable){TJG.appOfferWall[V]["offers_left"]=Z.MoreDataAvailable}else{TJG.appOfferWall[V]["offers_left"]=0}TJG.appOfferWall[V]["offset"]=TJG.appOfferWall[V]["offset"]+25;var Y=TJG.ui.getOffferRow(W,M,G,true);$("#offerwall_id-"+V).append(Y);var X=".offer_item_"+G;$.each($(X),function(b,a){$(a).fadeIn(500)});if(TJG.appOfferWall[V]["offers_left"]>0){$(".get_more_apps_content").html("Load More")}else{$(".more_button_wrapper").html('<div class="back_to_top grey_button"><div class="grey_button_content">Back to Top</div></div>');$(".back_to_top").click(function(){$("html, body").animate({scrollTop:0},"slow")})}$.each(W,function(a,b){TJG.appOfferWall[V]["offers"].push(b)})}O=false},error:function(){var W=['<div class="center">There was an issue fetching more offers. Please try again.</div>'].join("");if(!S){$("#offerwall_id-"+V).append(W).fadeIn(350)}S=true;$(".get_more_apps_content").html("Load More");$(".load_more_loader").hide();O=false}});G++}})}},error:function(){var O=['<div class="center">There was an issue. Please try again</div>'].join("");$("#earn_content").html(O);$("#earn_content").fadeIn(450);$("html, body").animate({scrollTop:0},800)}})}else{if(TJG.appOfferWall[K]["offers"]){TJG.ui.hideLoader();var N=TJG.ui.getOffferRow(TJG.appOfferWall[K]["offers"],M);$("#earn_content").html(N);$("#earn_content").fadeIn(450);$("html, body").animate({scrollTop:0},800)}else{var H=['<div class="center">There was an issue. Please try again</div>'].join("");$("#earn_content").html(H);$("#earn_content").fadeIn(450);$("html, body").animate({scrollTop:0},800)}}}else{var H=['<div class="center">There was an issue. Please try again</div>'].join("");$("#earn_content").html(H);$("#earn_content").fadeIn(450)}})})}function A(){$(".get_offerwall_jsonp").unbind("click");B()}function F(){$(".more_games_url").click(function(){$("#recommended_games_button").addClass("dark_grey").removeClass("grey");$("#top_grossing_games_button").addClass("grey").removeClass("dark_grey");$("#top_grossing_games_button_arrow").hide();$("#recommended_games_button_arrow").show();$("#more_games_content").fadeOut(350,function(){C.goTo("#more_games","slideleft")});if(TJG.moreAppOfferWall){$("#more_games_content").html(TJG.moreAppOfferWall);$("#more_games_content").fadeIn(450)}else{TJG.ui.showLoader();$.ajax({url:TJG.more_games_editor_picks,timeout:15000,success:function(G){TJG.moreAppOfferWall=G;TJG.ui.hideLoader();$("#more_games_content").html(G);$("#more_games_content").fadeIn(450)},error:function(){var G=["<div>There was an issue. Please try again</div>"].join("");$("#more_games_content").html(G);$("#more_games_content").fadeIn(450)}})}})}function D(){$("#top_grossing_games_tab").click(function(){$("#top_grossing_games_button").addClass("dark_grey").removeClass("grey");$("#recommended_games_button").addClass("grey").removeClass("dark_grey");$("#recommended_games_button_arrow").hide();$("#top_grossing_games_button_arrow").show();$("#recommended_games_tab").click(function(){$("#recommended_games_button").addClass("dark_grey").removeClass("grey");$("#top_grossing_games_button").addClass("grey").removeClass("dark_grey");$("#top_grossing_games_button_arrow").hide();$("#recommended_games_button_arrow").show();if(TJG.moreAppOfferWall){TJG.ui.hideLoader();$("#more_games_content").html(TJG.moreAppOfferWall);$("#more_games_content").fadeIn(450)}});if(TJG.topAppOfferWall){$("#more_games_content").html(TJG.topAppOfferWall);$("#more_games_content").fadeIn(450)}else{TJG.ui.showLoader();$("#more_games_content").fadeOut(450,function(){$("#more_games_content").empty()});$.ajax({url:TJG.more_games_popular,timeout:15000,success:function(G){TJG.topAppOfferWall=G;TJG.ui.hideLoader();$("#more_games_content").html(G);$("#more_games_content").fadeIn(450)},error:function(){var G=["<div>There was an issue. Please try again</div>"].join("");$("#more_games_content").html(G);$("#more_games_content").fadeIn(450)}})}})}TJG.path="#{games_root_path}";TJG.more_games_editor_picks="#{games_more_games_editor_picks_path}";TJG.more_games_popular="#{games_more_games_popular_path}";B();F();D()});