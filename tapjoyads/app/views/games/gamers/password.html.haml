#jqt
  #home.current
    = render :partial => 'games/homepage/nav_bar', :locals => { :active => 'back', :back_button_destination => edit_games_gamer_path }

    .content_wrapper
      = render(:partial => 'header')
      #edit_password.profile
        .content
          .content_box
            .interior
              - form_for([ :games, @gamer ], :url => { :action => :update_password }) do |f|
                .field
                  = label_tag 'gamer_password', 'New Password: '
                  = f.password_field :password
                  = error_message_on @gamer, :password
                .field
                  = label_tag 'gamer_password_confirmation', 'Confirm Password: '
                  = f.password_field :password_confirmation
                  = error_message_on @gamer, :password_confirmation
                .field
                  = f.submit 'Save', :class => 'button grey'
                .formError.hide
                  .account_error

- content_for :page_javascript do
  :plain
    $(window).load(function() {
      $('form').submit(function(e){
        $(".formError").hide();
        var inputs, pass, values = {};
        inputs = $('form :input[type=password]');
        inputs.each(function() {
          if (this.type == 'checkbox' || this.type == 'radio') {
            values[this.name] = $(this).attr("checked");
          }
          else {
            values[this.name] = $(this).val();
          }
          pass = values['gamer[password]'];
          if( pass == '' ) {
            $(".account_error").html('Please enter a password');
            $(".formError").show();
            e.preventDefault();
          }
        });
      });
    });
