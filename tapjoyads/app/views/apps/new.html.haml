- @page_title = 'New application'
- is_iphone = @app.platform=='iphone'
- app_store_name = is_iphone ? 'AppStore' : 'Marketplace'

= render :partial => 'shared/carousel', :locals => {:objects => current_partner_apps, :object => nil}
= render :partial => 'actions', :locals => {:app => nil}

#apps_main
  %h1 Add an app
  - form_for(@app, :html => { :class => 'tjform' }) do |f|
    = f.hidden_field :store_id
    %table
      %tbody
        %tr
          %th
            Application state
            #help_application_state.help ?
          %td
            = select_tag "state", options_for_select(['Not live', 'Live'].zip(%w(not_live, live))), :id => "app_state"
        %tr
          %th
            Platform
            #help_platform.help ?
          %td
            = f.select :platform, %w(iPhone Android).zip(%w(iphone android))
        %tr
          %th
            Name
            #help_name.help ?
          %td
            = f.text_field :name
            = button_to_function "Search", "search()", :class => 'search'
            -if @app.errors.on :name
              = error_message_on @app, :name
            #search_results
              = image_tag 'load-circle.gif', :class => 'load-circle'
        %tr.app_data
          %th App ID
          %td
            %a#app_store_link
        %tr.app_data
          %th Icon
          %td#app_icon &nbsp;
        %tr.app_data
          %th Price
          %td#app_price
        %tr.app_data
          %th Description
          %td
            #app_description
        %tr
          %td
          %td= f.submit 'Create'

.hidden
  #help_application_state_content{:name => 'Application State'}
    %li Not live: The app has not been submitted or approved yet.
    %li Live: The app has been approved, and is currently listed in the #{app_store_name}.
  #help_platform_content{:name => 'Platform'}
    Platform on which this app runs.
  #help_name_content{:name => 'Name'}
    App name

- content_for :page_head, stylesheet_link_tag('apps')
- content_for :included_javascripts, javascript_include_tag('tapjoy/apps')
- content_for :page_styles do
  :plain
    .app_data {
      display: none;
    }
    
    input[type=text] {
      width: 400px;
    }
