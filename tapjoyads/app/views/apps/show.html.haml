- @page_title = 'Apps'

= render :partial => 'apps', :object => @apps

#apps_main
  - unless @app.nil?
    .app-thumb
      .icon
        = image_tag(@app.primary_offer.get_icon_url, :size => '57x57', :alt => 'icon')

      %h2
        = @app.name
        = link_to "associated offer", app_offer_path({:app_id => @app.id, :id => @app.primary_offer.id})
      .clear
      - form_for @app do |f|
        %table.app{:cellpadding => 0, :cellspacing => 0, :border => 1}
          %tbody
            %tr
              %th Platform
              %td= f.select :platform, %w(iPhone Android).zip(%w(iphone android))
            %tr
              %th Description:
              %td
                = f.text_area :description, :size => "50x15"
                - if @app.errors.on :description
                  = error_message_on @app, :description
            %tr
              %th Store URL:
              %td
                = f.text_field :store_url, :size => 50
                - if @app.errors.on :store_url
                  = error_message_on @app, :store_url
            %tr
              %th Price:
              %td
                $
                = f.text_field :price, :value => (number_to_currency @app.price/100, :unit => ''), :size => 10
                - if @app.errors.on :price
                  = error_message_on @app, :price
            %tr
              %th Actions:
              %td &nbsp;
            %tr
              %th Integrated?:
              - if @integrated
                %td.integrated YES
              - else
                %td.not_integrated NO
        = f.submit 'Update'
    %br/
    %input.large{:type => 'submit', :value => 'Pay-Per-Install', :onclick => "location.href='/apps/pay_per_install/#{@app.id}';", :id => @app.id}

    -# TODO: implement PPA first
    %input.large{:type => 'submit', :value => 'Pay-Per-Action', :onclick => "location.href='/apps/pay_per_action/#{@app.id}';", :id => @app.id, :disabled => 'disabled' }

- content_for :page_styles do
  :plain
    td.integrated {
      color: #00f;
    }
    td.not_integrated {
      color: #f00;
    }
