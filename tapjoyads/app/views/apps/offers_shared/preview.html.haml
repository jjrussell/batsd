- @page_title = 'Ad Preview'

#previews
  - publisher_app_id = "2349536b-c810-47d7-836c-2cd47cd3a796" # TapDefense
  - if @offer.featured?
    Featured ad:
    %div.img320x480
      - if @show_generated_ads
        = image_tag(@offer.fullscreen_ad_image_url(publisher_app_id, true), :class => 'preview', :alt => '')
      - else
        = render :partial => "no_icon"
  - else
    - if @offer.rewarded? # show offer wall ad
      Marketplace ad:
      %div.img320x200
        - if @show_generated_ads
          = image_tag(@offer.get_offers_image_url(publisher_app_id, true), :class => 'preview', :alt => '')
        - else
          = render :partial => "no_icon"

    - if @offer.display_banner_ads?
      - Offer::DISPLAY_AD_SIZES.each_with_index do |size, index|
        = "#{size} banner ad:"
        %div{:class => "img#{size}"}
          - if @show_generated_ads
            - width, height = size.split("x").collect{|x|x.to_i}
            = image_tag(@offer.display_ad_image_url(publisher_app_id, width, height, nil, nil, true), :class => 'preview', :alt => '')
          - else
            = render :partial => "no_icon"

    - if @offer.rewarded?
      .banner_ad_notes
        *Banner ads for rewarded installs are only displayed for free apps where the app name is 30 characters or less, and where the conversion rate is 30% or more.

    - else
      .banner_ad_notes
        *To provide custom creatives for your non-rewarded ads, please contact
        = succeed '.' do
          = mail_to "support@tapjoy.com"
        Please ensure images have correct dimensions. Custom banner ads for non-rewarded installs are only displayed for free apps.

- content_for :page_javascript do
  :plain
    $(function($){
      $("img.preview").load(function() {
        this.setAttribute("style", "display: inline;");
      });
    });

- content_for :page_styles do
  :plain
    #previews {
      text-align: center;
    }

    .banner_ad_notes {
      font-size: 12px;
    }

    img.preview {
      display: none;
    }

  - (Offer::DISPLAY_AD_SIZES + %w(320x480 320x200)).each do |size|
    - width, height = size.split("x")
    - if @show_generated_ads # show spinner while images are loading
      :plain
        div.img#{width}x#{height} {
          background-image: url('/images/spinner.gif');
          background-repeat: no-repeat;
          background-position: center;
        }
    :plain
      div.img#{width}x#{height} {
        height: #{height}px;
        margin-bottom: 10px;
        margin-top: 5px;
        min-width: #{width}px;
      }
