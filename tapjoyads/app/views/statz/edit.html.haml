- @page_title = "Edit offer: #{@offer.name_with_suffix}"

.icon= image_tag(@offer.get_icon_url(request.protocol), :size => '57x57')

%h1= @offer.name_with_suffix

.clear

- form_for(:offer, @offer, :url => { :action => :update }, :html => { :method => :put, :class => 'tjform' }) do |f|
  %table
    %tr
      %th
        = f.label(:tapjoy_enabled)
        #help_tapjoy_enabled.help ?
      %td
        = f.check_box(:tapjoy_enabled)
        = error_message_on @offer, :tapjoy_enabled
    %tr
      %th
        = f.label(:self_promote_only)
        #help_self_promote_only.help ?
      %td
        = f.check_box(:self_promote_only)
        = error_message_on @offer, :self_promote_only
    %tr
      %th
        = f.label(:allow_negative_balance)
        #help_allow_negative_balance.help ?
      %td
        = f.check_box(:allow_negative_balance)
        = error_message_on @offer, :allow_negative_balance
    %tr
      %th
        = f.label(:pay_per_click)
        #help_pay_per_click.help ?
      %td
        = f.check_box(:pay_per_click)
        = error_message_on @offer, :pay_per_click
    %tr
      %th
        = f.label(:featured)
        #help_featured.help ?
      %td
        = f.check_box(:featured)
        = error_message_on @offer, :featured
    %tr
      %th
        = f.label(:name_suffix, 'Internal Suffix')
        #help_internal_suffix.help ?
      %td
        = f.text_field(:name_suffix)
        = error_message_on @offer, :name_suffix
    %tr
      %th
        = f.label(:ordinal)
        #help_ordinal.help ?
      %td
        = f.text_field(:ordinal)
        = error_message_on @offer, :ordinal
    %tr
      %th
        = f.label(:show_rate)
        #help_show_rate.help ?
      %td
        = f.text_field(:show_rate)
        = error_message_on @offer, :show_rate
    %tr
      %th
        = f.label(:min_conversion_rate, 'Min CVR')
        #help_min_conversion_rate.help ?
      %td
        = f.text_field(:min_conversion_rate)
        = error_message_on @offer, :min_conversion_rate
    %tr
      %th
        = f.label(:countries)
        #help_countries.help ?
      %td
        = f.text_field(:countries)
        = error_message_on @offer, :countries
      %td= link_to('Country codes', 'http://www.iso.org/iso/english_country_names_and_code_elements', :tabindex => 100)
    %tr
      %th
        = f.label(:cities)
        #help_cities.help ?
      %td
        = f.text_field(:cities)
        = error_message_on @offer, :cities
    %tr
      %th
        = f.label(:postal_codes)
        #help_postal_codes.help ?
      %td
        = f.text_field(:postal_codes)
        = error_message_on @offer, :postal_codes
    %tr
      %th
        = f.label(:device_types)
        #help_device_types.help ?
      %td
        = f.select(:device_types, options_for_select(Offer::ALL_DEVICES, @offer.get_device_types), {}, :multiple => true)
        = error_message_on @offer, :device_types
    %tr
      %th
        = f.label(:publisher_app_whitelist)
        #help_publisher_app_whitelist.help ?
      %td
        = f.text_field(:publisher_app_whitelist)
        = error_message_on @offer, :publisher_app_whitelist
    - if [ 'App', 'EmailOffer', 'GenericOffer' ].include?(@offer.item_type)
      %tr
        %th
          = f.label(:payment)
          #help_payment.help ?
        %td
          = f.currency_field(:payment)
          = error_message_on @offer, :payment
      %tr
        %th
          = f.label(:min_payment)
          #help_min_payment.help ?
        %td
          = f.currency_field(:min_payment)
          = error_message_on @offer, :min_payment
      %tr
        %th
          = f.label(:daily_budget)
          #help_daily_budget.help ?
        %td
          = f.text_field(:daily_budget)
          = error_message_on @offer, :daily_budget
      %tr
        %th
          = f.label(:overall_budget)
          #help_overall_budget.help ?
        %td
          = f.text_field(:overall_budget)
          = error_message_on @offer, :overall_budget
    - if @offer.item_type == 'App'
      %tr
        %th
          = label_tag(:app_store_id, 'Store ID')
          #help_app_store_id.help ?
        %td= text_field_tag(:app_store_id, @offer.item.store_id)
    %tr
      %td{ :colspan => 2 }= f.submit('Save Changes')

.hidden
  #help_tapjoy_enabled_content{ :name => 'Tapjoy Enabled' } Whether or not the offer is enabled for installs.
  #help_self_promote_only_content{ :name => 'Self Promote Only' } Only show this offer on offerwalls from the same partner.
  #help_allow_negative_balance_content{ :name => 'Allow Negative Balance' } Allow this partner's balance to go below zero. This effectively locks show rate to 1.0.
  #help_pay_per_click_content{ :name => 'Pay-Per-Click' } Charge the advertiser and award the user immediately on click.
  #help_featured_content{ :name => 'Featured' } Enables this offer in our featured offers feed.
  #help_internal_suffix_content{ :name => 'Internal Suffix' } Internal identifier for offers. i.e. 'featured' or 'us only'
  #help_ordinal_content{ :name => 'Ordinal' } The position of this offer on the offerwall. Default is 500.
  #help_show_rate_content{ :name => 'Show Rate' } The probability that this offer will be shown on an offerwall impression. This is set automatically by the system and is used for budgeting. Allowed values are 0.0 - 1.0.
  #help_min_conversion_rate_content{ :name => 'Min CVR' } This is used to prevent low conversion rate warnings. A warning will only be issued if the conversion rate falls below this threshold. Allowed values are blank or 0.0 - 1.0
  #help_countries_content{ :name => 'Countries' } Targets this offer to these countries. Must be an array of 2-character country codes or blank for no targeting. i.e. ["US", "GB"]
  #help_cities_content{ :name => 'Cities' } Targets this offer to these cities. Must be an array of city names or blank for no targeting. i.e. ["San Francisco"]
  #help_postal_codes_content{ :name => 'Postal Codes' } Targets this offer to these postal codes. Must be an array of postal codes or blank for no targeting. i.e. ["94105"]
  #help_device_types_content{ :name => 'Device Types' } Targets this offer to these device types. At least one device type must be selected.
  #help_publisher_app_whitelist_content{ :name => 'Publisher App Whitelist' } Restrict this offer to these publisher apps. Must be a ";" separated list of publisher app IDs.
  #help_payment_content{ :name => 'Payment' } The price per conversion.
  #help_daily_budget_content{ :name => 'Daily Budget' } The maximum number of conversions to complete in one day.
  #help_overall_budget_content{ :name => 'Overall Budget' } The maximum number of conversions to complete in the lifetime of this offer. This is merely a hard limit so it is likely that the offer will go over-budget.
  #help_app_store_id_content{ :name => 'Store ID' } The App Store ID or Android Market name of this app. i.e. '297558390' for Apple, 'com.tapjoy.tapout' for Android

- content_for :page_styles do
  :plain
    .icon {
      float: left;
      padding: 20px 0;
    }
