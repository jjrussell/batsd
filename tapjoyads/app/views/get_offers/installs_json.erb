<%= 
  unless params[:callback].blank?
    params[:callback].gsub(/\W/, '') + '('
  end
-%>
{"OfferArray": [
  <% @offer_list.each_with_index do |offer, i| %>
    {
      "Cost":<%= visual_cost(offer).to_json -%>,
      "Amount":<%= @currency.get_visual_reward_amount(offer, params[:display_multiplier]).to_json -%>,
      "IconURL":<%= offer.get_icon_url(:source => :cloudfront, :size => '57').to_json -%>,
      "Name":<%= offer.name.to_json -%>,
      "RedirectURL":<%= get_click_url(offer).to_json -%>,
      "StoreID":<%= offer.store_id_for_feed.to_json -%>,
      "Payout":<%= @currency.get_publisher_amount(offer).to_json -%>,
      "Type":<%= offer.item_type.to_json -%>
      <% if params[:source] == 'featured' %>,
        , "FullScreenAdURL":<%= get_fullscreen_ad_url(offer).to_json -%>
      <% end %>
    }
    <%= ',' if i < @offer_list.length - 1 -%>
  <% end %>
],
"Message":<%=('Install one of the apps below to earn ' + @currency.name).to_json -%>
,"CurrencyName":<%=@currency.name.to_json -%>
<% if @tap_points.present? %>
  ,"TapPoints":<%= @tap_points -%>
<% end %>
<% if @more_data_available > 0 %>
  , "MoreDataAvailable":<%= @more_data_available.to_json -%>
<% end %>
}
<%= ')' unless params[:callback].blank? -%>
