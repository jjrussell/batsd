!!! 5
%html
  %head
    %title Tapjoy Gallery
    %meta{'name' => "viewport", 'content' => "initial-scale=1, maximum-scale=1, minimum-scale=1 user-scalable=no, width = 320"}
    %meta{'name' => "viewport", 'content' => "width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"}
    %meta{'name' => "apple-mobile-web-app-capable", 'content' => "yes"}
    %meta{'name' => "apple-mobile-web-app-status-bar-style", 'content' => "black"}
    = javascript_include_tag 'jquery-1.4.2.min', 'sencha-touch'
    %style{:type => "text/css", :media => "screen"}
      @import "/stylesheets/sencha-touch.css";

    %script
      :plain
        var offers = #{@gallery.to_json};
        var offerItems = new Array();
        var maxImages = 10;
        var length = offers.length;
        for (var i = 0; i < length; i++) {
          var obj = offers[i];
          var newObj = new Object();
          var iconURL = obj.icon_url;
          var iconSRC = '';
          iconSRC = '<div class="item-icon"><img src="' + iconURL + '"></div>';
          var itemHTML = [
            '<div class="widget"><div class="item box-border box-rounded box-shadow">',
              iconSRC,
              obj.instructions,
           '</div></div>',
          ].join('');
          newObj.html = itemHTML;
          offerItems.push(newObj);
        }
        Ext.setup({
          glossOnIcon: false,
          onReady: function() {
            var carousel = new Ext.Carousel({
              defaults: {
                cls: 'main'
           	  },
              items: offerItems
            });
            new Ext.Panel({
              fullscreen: true,
                 layout: {
                   type: 'vbox',
                   align: 'stretch'
                 },
                 defaults: {
                   flex: 1
                 },
                 items: [carousel]
            });
         }
      });
    %style
      :plain
        
        body {
          background:#525252 url('/images/bg.png');
          color:#333;
          font-size:16px;
        }
        a, a:visited, a:hover {
          color:#000;
          text-decoration:none;
        }
        .main {
          background:#525252 url('/images/bg.png');
          color:#333;
         }
        .widget {
          margin-top:12px;
          padding:0px 10px;
        }
        .item, .item-detail {
          background-color:#FFF;
          min-height:320px;
          width:100%;
          padding:10px;
        }
        .item-detail {
          background-color:#e6e6e6;
          height:100%;
          min-height:420px;
        }
        .box-border {
        }
        .box-shadow {
          -webkit-box-shadow:0px 0px 6px #111111;
        }
        .box-rounded {
          -webkit-border-radius: 10px;
        }
        .item-icon {
          text-align: center;
        }
        .item-icon img {
          border: 2px solid #999;
          -webkit-background-clip: padding-box;
          -webkit-border-radius: 12px;
          -webkit-box-shadow: 1px 1px 3px rgba(61, 61, 61, 0.3);
          margin:12px 0;
          padding: 10px;
          width:120px;
        }

  %body