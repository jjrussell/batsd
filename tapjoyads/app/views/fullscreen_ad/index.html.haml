- @page_title = @currency.conversion_rate > 0 ? t('text.featured.title', :currency => @currency.name) : ''

#main
  - if @offer.rewarded? && @currency.conversion_rate > 0
    %h1= t('text.featured.earn_currency', :amount_and_currency => "#{@currency.get_visual_reward_amount(@offer, params[:display_multiplier])} #{@currency.name}")
  %p.offertext
    - if @offer.item_type == 'App'
      = @offer.rewarded? ? t('text.featured.download_and_run') : t('text.featured.try_out')
  - link_to(get_click_url(@offer), :class => 'image-link') do
    %img{ :src => "#{CLOUDFRONT_URL}/images/blank.png", :s => @offer.get_icon_url(:source => :cloudfront, :size => '256'), :class => 'icon', :id => 'icon' }
    .offername= @offer.truncated_name
  .clear
  = link_to(t('text.featured.skip'), 'dismiss', :class => 'skip')
  = link_to(@offer.item_type == 'App' ? t('text.featured.download') : t('text.featured.earn_now'), get_click_url(@offer), :class => 'download')
  .showOffers
    = link_to(@currency.hide_rewarded_app_installs? ? '' : t('text.featured.show_more_apps'), 'showOffers')

  .adsby
    %span= t('text.shared.ads_by')
    #logo

- content_for :page_javascript do
  :plain
    document.ontouchmove = function(e){ e.preventDefault(); }
    window.onload = init;
    window.onorientationchange = init;

    function init() {
      icon = document.getElementById('icon');
      main = document.getElementById('main');

      if (icon.getAttribute('s') && icon.src != icon.getAttribute('s')) {
        icon.src = icon.getAttribute('s');
      }

      if(#{params[:height].present?}) {
        clientHeight = parseInt('#{params[:height]}');
      } else {
        clientHeight = document.documentElement.clientHeight;
      }

      document.body.setAttribute('style', 'height: ' + (clientHeight  - 30) + 'px;');

      if (clientHeight < 480) {
        icon.setAttribute('style', 'width: 96px; height: 96px;');
        main.setAttribute('style', 'height: 294px; margin-top: -147px; top: 50%');
      } else if (clientHeight > 800) {
        icon.setAttribute('style', 'width: 512px; height: 512px;');
        main.setAttribute('style', 'height: 710px; margin-top: -355px; top: 50%');
      } else {
        icon.setAttribute('style', 'width: 256px; height: 256px;');
        main.setAttribute('style', 'height: 454px; margin-top: -227px; top: 50%');
      }
    }

- content_for :page_styles do
  :plain

    h1 {
      color: #004E09;
      font-size: 22px;
      margin: 8px 0;
    }

    p {
      margin: 4px 0;
    }

    body {
      margin: 0;
      height: #{params[:height]}px;
    }

    #main {
      font-size: 20px;
      text-align: center;
      position: relative;
      margin: 8px;
    }

    .offertext {
      color: #004E09;
    }

    .image-link {
      text-decoration: none;
      display: inline-block;
    }

    .offername {
      font-weight: bold;
      color: #008810;
      margin-bottom: 16px;
      margin-top: 4px;
    }

    img.icon {
      border: 1px solid #aaa;
      display: block;
      margin: 0 auto;
      padding: 3px;
      width: 96px;
      height: 96px;
      -moz-border-radius: 7px;
      -webkit-border-radius: 7px;
      background-image: url('/images/spinner.gif');
      background-repeat: no-repeat;
      background-position: center;
    }

    .skip,
    .download {
      border: 1px solid #aaa;
      -moz-border-radius: 7px;
      -webkit-border-radius: 7px;
      text-decoration: none;
    }

    .skip {
      padding: 5px;
      margin-right: 20px;
      color: #555;
      background-color: #ccc;
    }

    .download {
      background: url("/images/arrow-right.png") no-repeat scroll 98% 50% #eee;
      color: #004E09;
      display; block;
      padding: 5px 50px 5px 40px;
      font-weight: bold;
    }

    .showOffers {
      position: absolute;
      bottom: 5px;
      left: 5px;
      font-size: 12px;
      text-decoration: none;
    }

    .adsby { position: absolute; right: 5px; bottom: -4px; }
    .adsby span { display: inline-block; font-size: 13px; text-decoration: none; vertical-align: top; margin-top: 6px; height: 20px; }
    .adsby #logo { background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAUCAYAAAAOTSQ2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNUU5NjZFRkZFNUYxMUUwOTJCN0UxMzQ3MTUzNTk5NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNUU5NjZGMEZFNUYxMUUwOTJCN0UxMzQ3MTUzNTk5NCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE1RTk2NkVERkU1RjExRTA5MkI3RTEzNDcxNTM1OTk0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE1RTk2NkVFRkU1RjExRTA5MkI3RTEzNDcxNTM1OTk0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Z3rhigAAB/hJREFUeNrMVgls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) no-repeat; }
    .adsby #logo { display: inline-block; width: 39px; height: 20px; margin-top: 6px; }
