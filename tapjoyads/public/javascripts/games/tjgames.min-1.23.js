var TJG={};TJG.vars={};TJG.doc=document.documentElement;TJG.vars.orientationClasses=["landscape","portrait"];TJG.vars.isIos=false;TJG.vars.isTouch=false;TJG.vars.imageLoaderInit=false;TJG.vars.autoKey=0;TJG.appOfferWall={};TJG.loadedImages={};(function(H,K){var G,L;function O(P){G=$(H).height();L=$(H).width();$(P).css("top",G/2-$().height()/2);$(P).css("left",L/2-$(P).width()/2);$(P).show()}O("#loader");var B=navigator,F=[""],D={},C="",A="";TJG.vars.isIos=(/iphone|ipod|ipad/gi).test(B.platform);TJG.vars.isAndroid=(/android/gi).test(B.platform);TJG.vars.isMobile=/(ip(od|ad|hone)|android)/gi.test(B.userAgent);TJG.vars.isIPad=(/ipad/gi).test(B.platform);TJG.vars.isRetina="devicePixelRatio" in H&&H.devicePixelRatio>1;TJG.vars.isSafari=B.appVersion.match(/Safari/gi);TJG.vars.hasHomescreen="standalone" in B&&TJG.vars.isIos;TJG.vars.isStandalone=TJG.vars.hasHomescreen&&B.standalone;TJG.vars.version=B.appVersion.match(/OS \d+_\d+/g);TJG.vars.platform=B.platform.split(" ")[0];TJG.vars.language=B.language.replace("-","_");if(TJG.vars.isIos||TJG.vars.isMobile){if(TJG.vars.isIPad){D.mobile="ipad"}}else{D.mobile="web"}F.push(L+"x"+G);if("ontouchend" in K){D["no-touch"]="touch";TJG.vars.isTouch=true}if(TJG.vars.isRetina){D["no-hd"]="hd"}function E(){return TJG.vars.orientationClasses[H.orientation%180?0:1]}if("orientation" in H){var N=new RegExp("("+TJG.vars.orientationClasses.join("|")+")"),J=("onorientationchange" in H)?"orientationchange":"resize",M=F.push(E());addEventListener(J,function(){var R=E();if(M!=R){M=R;var Q=TJG.doc.className;TJG.doc.className=Q?Q.replace(N,M):M;if(TJG.repositionDialog.length>0){for(var P=0;P<TJG.repositionDialog.length;P++){O(TJG.repositionDialog[P])}}}},false)}var I=TJG.doc.className;for(replace in D){I=I.replace(replace,D[replace])}TJG.doc.className=I+F.join(" ")})(this,document);(function(A){A.jQTouch=function(V){var a,S=A("head"),h="",f=[],e=0,L={},I="",U="portrait",q=true,p=0,E=0,H=[],W={},J=351,k=A.jQTouch.prototype.extensions,o=[],R="",b={addGlossToIcon:true,backSelector:".back, .cancel, .goback",cacheGetRequests:true,debug:false,fallback2dAnimation:"fade",fixedViewport:true,formSelector:"form",fullScreen:true,fullScreenClass:"fullscreen",hoverDelay:50,icon:null,icon4:null,moveThreshold:10,preloadImages:false,pressDelay:1000,startupScreen:null,statusBar:"default",submitSelector:".submit",touchSelector:"a, .touch",useAnimations:true,useFastTouch:true,animations:[{selector:".cube",name:"cubeleft",is3d:true},{selector:".cubeleft",name:"cubeleft",is3d:true},{selector:".cuberight",name:"cuberight",is3d:true},{selector:".dissolve",name:"dissolve",is3d:false},{selector:".fade",name:"fade",is3d:false},{selector:".flip",name:"flipleft",is3d:true},{selector:".flipleft",name:"flipleft",is3d:true},{selector:".flipright",name:"flipright",is3d:true},{selector:".pop",name:"pop",is3d:true},{selector:".slide",name:"slideleft",is3d:false},{selector:".slidedown",name:"slidedown",is3d:false},{selector:".slideleft",name:"slideleft",is3d:false},{selector:".slideright",name:"slideright",is3d:false},{selector:".slideup",name:"slideup",is3d:false},{selector:".swap",name:"swapleft",is3d:true},{selector:"#jqt > * > ul li a",name:"slideleft",is3d:false}]};function B(r){if(typeof (r.selector)==="string"&&typeof (r.name)==="string"){o.push(r)}}function K(s,r){f.unshift({page:s,animation:r,hash:"#"+s.attr("id"),id:s.attr("id")})}function N(s){if(!q){s.preventDefault();return false}var r=A(s.target);if(!r.is(H.join(", "))){var r=A(s.target).closest(H.join(", "))}if(r&&r.attr("href")&&!r.isExternalLink()){s.preventDefault()}if(A.support.touch){}else{A(s.target).trigger("tap",s)}}function C(w,t,v,s){if(t.length===0){A.fn.unselect();return false}if(t.hasClass("current")){A.fn.unselect();return false}A(":focus").blur();w.trigger("pageAnimationStart",{direction:"out"});t.trigger("pageAnimationStart",{direction:"in"});if(A.support.animationEvents&&v&&L.useAnimations){q=false;if(!A.support.transform3d&&v.is3d){v.name=L.fallback2dAnimation}var r;if(s){if(v.name.indexOf("left")>0){r=v.name.replace(/left/,"right")}else{if(v.name.indexOf("right")>0){r=v.name.replace(/right/,"left")}else{if(v.name.indexOf("up")>0){r=v.name.replace(/up/,"down")}else{if(v.name.indexOf("down")>0){r=v.name.replace(/down/,"up")}else{r=v.name}}}}}else{r=v.name}w.bind("webkitAnimationEnd",u);w.bind("webkitTransitionEnd",u);scrollTo(0,0);t.addClass(r+" in current");w.addClass(r+" out")}else{t.addClass("current");u()}function u(x){if(A.support.animationEvents&&v&&L.useAnimations){w.unbind("webkitAnimationEnd",u);w.unbind("webkitTransitionEnd",u);w.removeClass(r+" out current");t.removeClass(r+" in")}else{w.removeClass(r+" out current")}I=t;if(s){f.shift()}else{K(I,v)}w.unselect();E=(new Date()).getTime();M(I.attr("id"));q=true;t.trigger("pageAnimationEnd",{direction:"in",animation:v});w.trigger("pageAnimationEnd",{direction:"out",animation:v})}return true}function n(){return U}function G(){if(f.length<1){}if(f.length===1){}var s=f[0],r=f[1];if(C(s.page,r.page,s.animation,true)){return W}else{return false}}function j(v,w,t){var x=f[0].page;if(typeof w==="string"){for(var u=0,r=o.length;u<r;u++){if(o[u].name===w){w=o[u];break}}}if(typeof (v)==="string"){var s=A(v);if(s.length<1){D(v,{animation:w});return }else{v=s}}if(C(x,v,w)){return W}else{return false}}function m(r){if(location.hash===f[0].hash){}else{if(location.hash===f[1].hash){G()}}}function l(r){L=A.extend({},b,r)}function Y(r,s){var t=null;A(r).each(function(v,w){var u=A(this);if(!u.attr("id")){u.attr("id","page-"+(++e))}A("#"+u.attr("id")).remove();a.trigger("pageInserted",{page:u.appendTo(a)});if(u.hasClass("current")||!t){t=u}});if(t!==null){j(t,s);return t}else{return false}}function X(r){var s=(new Date()).getTime()-E;if(s<J){return false}}function F(){U=Math.abs(window.orientation)==90?"landscape":"portrait";a.removeClass("portrait landscape").addClass(U).trigger("turn",{orientation:U})}function M(r){r=r.replace(/^#/,""),location.hash="#"+r}function D(r,s){var u={data:null,method:"GET",animation:null,callback:null,$referrer:null};var t=A.extend({},u,s);if(r!="#"){A.ajax({url:r,data:t.data,type:t.method,success:function(v,x){var w=Y(v,t.animation);if(w){if(t.method=="GET"&&L.cacheGetRequests===true&&t.$referrer){t.$referrer.attr("href","#"+w.attr("id"))}if(t.callback){t.callback(true)}}},error:function(v){if(t.$referrer){t.$referrer.unselect()}if(t.callback){t.callback(false)}}})}else{if(t.$referrer){t.$referrer.unselect()}}}function P(s,t){A(":focus").blur();s.preventDefault();var r=(typeof (s)==="string")?A(s).eq(0):(s.target?A(s.target):A(s));if(r.length&&r.is(L.formSelector)&&r.attr("action")){D(r.attr("action"),{data:r.serialize(),method:r.attr("method")||"POST",animation:o[0]||null,callback:t});return false}return false}function i(t){var s=t.closest("form");if(s.length===0){}else{var r=A.Event("submit");r.preventDefault();s.trigger(r);return false}return true}function O(){return(typeof WebKitAnimationEvent!="undefined")}function c(){return(typeof WebKitCSSMatrix!="undefined")}function g(){if(typeof TouchEvent!="undefined"){if(window.navigator.userAgent.indexOf("Mobile")>-1){return true}else{return false}}else{return false}}function Z(){var t,s,u,v,r;t=document.getElementsByTagName("head")[0];s=document.body;u=document.createElement("style");u.textContent="@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-ms-transform-3d),(-webkit-transform-3d),(modernizr){#jqtTestFor3dSupport{height:3px}}";v=document.createElement("div");v.id="jqtTestFor3dSupport";t.appendChild(u);s.appendChild(v);r=v.offsetHeight===3;u.parentNode.removeChild(u);v.parentNode.removeChild(v);return r}function d(x){if(!q){return false}var t=A(x.target);if(!t.is(H.join(", "))){var t=A(x.target).closest(H.join(", "))}if(!t.length||!t.attr("href")){return false}var w=t.attr("target"),v=t.attr("hash"),u=null;if(t.isExternalLink()){t.unselect();return true}else{if(t.is(L.backSelector)){G(v)}else{if(t.is(L.submitSelector)){i(t)}else{if(w==="_webapp"||w==="internal"||w==="no-ajax"){window.location=t.attr("href");return false}else{if(t.attr("href")==="#"){t.unselect();return true}else{for(var s=0,r=o.length;s<r;s++){if(t.is(o[s].selector)){u=o[s];break}}if(!u){u="slideleft"}if(v&&v!=="#"){t.addClass("active");j(A(v).data("referrer",t),u,t.hasClass("reverse"));return false}else{if(w==="ajax"){t.addClass("loading active");D(t.attr("href"),{animation:u,callback:function(){t.removeClass("loading");setTimeout(A.fn.unselect,250,t)},$referrer:t});return false}else{window.location=t.attr("href");return false}}}}}}}}function T(AB){if(!q){AB.preventDefault();return false}var AF=A(AB.target);if(!AF.length){return }var t=(new Date).getTime(),r=null,u=null,x,z,y,w=0,v=0,AA=0;if(event.changedTouches&&event.changedTouches.length){x=event.changedTouches[0];z=x.pageX;y=x.pageY}AF.bind("touchmove",AC).bind("touchend",s).bind("touchcancel",AD);r=setTimeout(function(){AF.makeActive()},L.hoverDelay);u=setTimeout(function(){AF.unbind("touchmove",AC).unbind("touchend",s).unbind("touchcancel",AD);AF.unselect();clearTimeout(r);AF.trigger("press")},L.pressDelay);function AD(AG){clearTimeout(r);AF.unselect();AF.unbind("touchmove",AC).unbind("touchend",s).unbind("touchcancel",AD)}function s(AG){AF.unbind("touchend",s).unbind("touchcancel",AD);clearTimeout(r);clearTimeout(u);if(Math.abs(w)<L.moveThreshold&&Math.abs(v)<L.moveThreshold&&AA<L.pressDelay){AF.trigger("tap",AG)}else{AF.unselect()}}function AC(AJ){AE();var AI=Math.abs(w);var AG=Math.abs(v);var AH;if(AI>AG&&(AI>35)&&AA<1000){if(w<0){AH="left"}else{AH="right"}AF.unbind("touchmove",AC).unbind("touchend",s).unbind("touchcancel",AD);AF.trigger("swipe",{direction:AH,deltaX:w,deltaY:v})}AF.unselect();clearTimeout(r);if(AI>L.moveThreshold||AG>L.moveThreshold){clearTimeout(u)}}function AE(){var AG=event.changedTouches[0]||null;w=AG.pageX-z;v=AG.pageY-y;AA=(new Date).getTime()-t}}function Q(r){if(r!==undefined){if(r===true){if(g()){A.support.touch=true}}else{A.support.touch=false}}return A.support.touch}l(V);A(document).ready(function(){A.support.animationEvents=O();A.support.cssMatrix=c();A.support.touch=g()&&L.useFastTouch;A.support.transform3d=Z();A.fn.isExternalLink=function(){var v=A(this);return(v.attr("target")=="_blank"||v.attr("rel")=="external"||v.is('a[href^="http://maps.google.com"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]'))};A.fn.makeActive=function(){return A(this).addClass("active")};A.fn.press=function(v){if(A.isFunction(v)){return A(this).live("press",v)}else{return A(this).trigger("press")}};A.fn.swipe=function(v){if(A.isFunction(v)){return A(this).live("swipe",v)}else{return A(this).trigger("swipe")}};A.fn.tap=function(v){if(A.isFunction(v)){return A(this).live("tap",v)}else{return A(this).trigger("tap")}};A.fn.unselect=function(v){if(v){v.removeClass("active")}else{A(".active").removeClass("active")}};for(var s=0,r=k.length;s<r;s++){var t=k[s];if(A.isFunction(t)){A.extend(W,t(W))}}if(L.cubeSelector){L.cubeleftSelector=L.cubeSelector}if(L.flipSelector){L.flipleftSelector=L.flipSelector}if(L.slideSelector){L.slideleftSelector=L.slideSelector}for(var s=0,r=b.animations.length;s<r;s++){var u=b.animations[s];if(L[u.name+"Selector"]!==undefined){u.selector=L[u.name+"Selector"]}B(u)}H.push("input");H.push(L.touchSelector);H.push(L.backSelector);H.push(L.submitSelector);A(H.join(", ")).css("-webkit-touch-callout","none");a=A("#jqt");if(a.length===0){a=A("body").attr("id","jqt")}if(A.support.transform3d){a.addClass("supports3d")}if(L.fullScreenClass&&window.navigator.standalone==true){a.addClass(L.fullScreenClass+" "+L.statusBar)}if(window.navigator.userAgent.match(/Android/ig)){a.addClass("android")}A(window).bind("hashchange",m);a.bind("touchstart",T).bind("click",N).bind("mousedown",X).bind("orientationchange",F).bind("submit",P).bind("tap",d).trigger("orientationchange");if(A("#jqt > .current").length==0){I=A("#jqt > *:first")}else{I=A("#jqt > .current:first");A("#jqt > .current").removeClass("current")}A(I).addClass("current");h=A(I).attr("id");M(h);K(I);scrollTo(0,0);A("#jqt > *").css("minHeight",window.innerHeight)});W={addAnimation:B,animations:o,getOrientation:n,goBack:G,goTo:j,hist:f,settings:L,submitForm:P,support:A.support,useFastTouch:Q};return W};A.jQTouch.prototype.extensions=[];A.jQTouch.addExtension=function(B){A.jQTouch.prototype.extensions.push(B)}})(jQuery);TJG.utils={genSym:function(){var A=""+TJG.vars.autoKey;TJG.vars.autoKey++;return A},isNull:function(A){if(typeof A=="boolean"){return false}else{if(typeof A=="number"){return false}else{return A==undefined||A==null||A==""}}},or:function(B,A){if(this.isNull(B)){return A}return B},hideURLBar:function(){setTimeout(function(){window.scrollTo(0,1)},0)},getOrientation:function(){return TJG.vars.orientationClasses[window.orientation%180?0:1]},updateOrientation:function(){var A=this.getOrientation();TJG.doc.setAttribute("orient",A)},centerDialog:function(B){var C=$(window).height();var A=$(window).width();$(B).css("top",C/2-$(B).height()/2);$(B).css("left",A/2-$(B).width()/2)},disableScrollOnBody:function(){if(!TJG.vars.isTouch){return }document.body.addEventListener("touchmove",function(A){A.preventDefault()},false)},getParam:function(B){B=B.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var A="[\\?&]"+B+"=([^&]*)";var D=new RegExp(A);var C=D.exec(window.location.href);if(C==null){return""}else{return C[1]}},setLocalStorage:function(B,A){if(typeof (localStorage)=="undefined"){return }else{try{localStorage[B]=A}catch(C){}}},unsetLocalStorage:function(A){if(typeof (localStorage)=="undefined"){return }localStorage.removeItem(A)},getLocalStorage:function(A){if(typeof (localStorage)=="undefined"){return }return localStorage[A]},scrollTop:function(A){if(A==null){A="slow"}$("html, body").animate({scrollTop:0},A)},loadImages:function(C){TJG.vars.scrolling=false;var A=0,B=0;if(TJG.vars.isIos){A=60;B=80}$(C).each(function(F,E){if(this&&$.inviewport(this,{padding:B,threshold:A})){var D=$(E).children("img:first");if($(D).attr("loaded")=="true"){return }$(D).attr("src",$(D).attr("s")).attr("loaded","true");$(D).error(function(){$(D).attr("src",TJG.blank_img)})}});if(!TJG.vars.imageLoaderInit){$(window).scroll(function(){if(!TJG.vars.scrolling){TJG.vars.scrolling=true;setTimeout(function(){$(C).each(function(G,E){var F=$(E).attr("id");if(this&&$.inviewport(this,{padding:B,threshold:A})){var D=$(E).children("img:first");if($(D).attr("loaded")=="true"){return }$(D).attr("src",$(D).attr("s")).attr("loaded","true");$(D).error(function(){$(D).attr("src",TJG.blank_img)})}});TJG.vars.scrolling=false},150)}});$(window).trigger("scroll");TJG.vars.imageLoaderInit=true}}};$.utils=TJG.utils;TJG.ui={hideLoader:function(A,B){TJG.repositionDialog=[];A=$.utils.or(A,"fast");setTimeout(function(){$("#loader").fadeOut(A,B)})},showLoader:function(A,B){$.utils.centerDialog("#loader");TJG.repositionDialog=["#loader"];A=$.utils.or(A,"fast");setTimeout(function(){$("#loader").fadeIn(A,B)})},removeDialogs:function(A){A=$.utils.or(A,"fast");setTimeout(function(){$(".dialog_wrapper").fadeOut(A)});TJG.repositionDialog=[]},getOfferRow:function(F,A,C,E){var B=[],G="",D="";if(C){G="offer_item_"+C}if(E){D='style="display:none;"'}$.each(F,function(J,H){var I="";if(H.Cost=="Free"){I="free"}B.push('<a href="'+H.RedirectURL+'">');B.push('<li class="offer_item clearfix '+G+'" '+D+">");B.push('<a href="'+H.RedirectURL+'">');B.push('<div class="offer_image">');B.push('<div id="'+TJG.utils.genSym()+'" class="offer_image_loader_wrapper"><img src="'+TJG.blank_img+'" s="'+H.IconURL+'"></div>');B.push("</div>");B.push("</a>");B.push('<div class="offer_text">');B.push('<div class="offer_title title">');B.push(H.Name);B.push("</div>");B.push('<div class="offer_install">');B.push("Install and run "+H.Name);B.push("</div>");B.push('<div class="offer_info">');B.push('<a href="'+H.RedirectURL+'">');B.push('<div class="offer_button my_apps">');B.push('<div class="button grey">');B.push('<span class="amount">');B.push(H.Amount);B.push("</span>");B.push(" ");B.push('<span class="currency">');B.push(A);B.push("</span>");B.push('<span class="cost '+I+'">');B.push(H.Cost);B.push("</span>");B.push("</div>");B.push("</div>");B.push("</a>");B.push("</div>");B.push("</div>");B.push("</li>");B.push("</a>")});return B.join("")},showRegister:function(){var A=true,B,C="fast";if(TJG.path){B=TJG.path}else{B=location.pathname.replace(/\/$/,"")}TJG.repositionDialog=["#sign_up_dialog"];$("#sign_up_dialog_content").html($("#sign_up_dialog_content_placeholder").html());$(".close_dialog").show();$("#sign_up_dialog_content").parent().animate({height:"270px",},C);$("#sign_up_dialog").fadeIn();$("form#new_gamer").submit(function(J){J.preventDefault();var H,F,G={},I,E=false,K;H=$(this).attr("action");F=$("form#new_gamer :input");F.each(function(){if(this.type=="checkbox"||this.type=="radio"){G[this.name]=$(this).attr("checked")}else{G[this.name]=$(this).val()}});$(".email_error").hide();K=/^([\w-\.+]+@([\w-]+\.)+[\w-]{2,4})?$/;if(G["gamer[email]"]==""){$(".email_error").html("Please enter your email address");E=true}else{if(!K.test(G["gamer[email]"])){$(".email_error").html("Enter a valid email address");E=true}else{if(G["gamer[password]"]==""){$(".email_error").html("Please enter a password");E=true}else{if(G["gamer[terms_of_service]"]==false){$(".email_error").html("Please agree to the terms and conditions above");E=true}}}}if(E){$(".email_error").show()}else{if(E!=true){var D=['<div id="dialog_title title_2">Registering</div>','<div class="dialog_image"></div>'].join("");$("#sign_up_dialog_content").html(D);$("#sign_up_dialog_content").parent().animate({height:"120px",},C);$.ajax({type:"POST",url:H,cache:false,timeout:15000,dataType:"json",data:{authenticity_token:G.authenticity_token,"gamer[email]":G["gamer[email]"],"gamer[password]":G["gamer[password]"],"gamer[referrer]":G["gamer[referrer]"]},success:function(N){var M;if(N.success){A=false;M=['<div class="dialog_header_wrapper"><div class="dialog_header_right"></div><div class="dialog_header_left"></div><div class="dialog_title title_2">Success!</div></div>','<div class="dialog_header">Your Tapjoy Games account was sucessfully created</div>','<div class="dialog_content">A confirmation email has been sent to the address you entered.  Please follow the registration in the email to verify your address and complete the account registration. :)</div>','<div class="dialog_content"><div class="continue_link_device"><div class="button dialog_button">Continue</div></div></div>'].join("");$(".close_dialog").unbind("click");$("#sign_up_dialog_content").parent().animate({height:"230px",},C);$("#sign_up_dialog_content").html(M);if(N.linked){$(".close_dialog,.continue_link_device").click(function(){if(TJG.path){document.location.href=TG.path}else{document.location.href=document.domain}})}else{if(N.link_device_url){$(".close_dialog,.continue_link_device").click(function(){$(".close_dialog").unbind("click");M=['<div id="link_device" class="dialog_header_wrapper"><div class="dialog_header_right"></div><div class="dialog_header_left"></div><div class="dialog_title title_2">Link Device</div></div>','<div class="dialog_header">The final step is to link your device to your Tapjoy Games account.  Please continue and click install on the next screen.</div>','<div class="dialog_content"><div class="link_device_url"><div class="button dialog_button">Link Device</div></div></div>'].join("");$("#sign_up_dialog_content").parent().animate({height:"170px",},C);$("#sign_up_dialog_content").html(M);$(".close_dialog,.link_device_url").click(function(){document.location.href=N.link_device_url})})}else{$(".close_dialog,.continue_link_device").click(function(){document.location.href=location.protocol+"//"+location.host})}}}else{var L="There was an issue with registering your account";if(N.error){if(N.error[0][0]&&N.error[0][1]){L="The "+N.error[0][0]+" "+N.error[0][1]}}M=['<div class="dialog_header_wrapper"><div class="dialog_header_right"></div><div class="dialog_header_left"></div><div class="dialog_title title_2">Oops!</div></div>','<div class="dialog_content">',L,'. <span id="sign_up_again"><a href="#">Please click here to try again.</a></span></div>',].join("");$("#sign_up_dialog_content").html(M);$(".close_dialog").hide()}$("#sign_up_again").click(function(){TJG.ui.showRegister();$("#sign_up_dialog_content").parent().animate({height:"270px",},C)})},error:function(){var L="There was an issue";msg=['<div class="dialog_header_wrapper"><div class="dialog_header_right"></div><div class="dialog_header_left"></div><div class="dialog_title title_2">Oops!</div></div>','<div class="dialog_content">',L,'. <span id="sign_up_again"><a href="#">Please click here to try again.</a></span></div>',].join("");$(".close_dialog").hide();$("#sign_up_dialog_content").html(msg);$("#sign_up_again").click(function(){TJG.ui.showRegister();$("#sign_up_dialog_content").parent().animate({height:"270px",},C)})}})}}})},showAddHomeDialog:function(){var H=startX=0,Q={message:'Add <span class="bold">Tapjoy Games</span> to your home screen.',animationIn:"fade",animationOut:"fade",startDelay:2000,lifespan:10000,bottomOffset:14,expire:0,arrow:true,iterations:5},M,N,C,G,F,L=TJG.utils.getLocalStorage("tjg.bookmark.expired"),K=TJG.utils.getLocalStorage("tjg.bookmark.shown");if(TJG.utils.isNull(K)){K=0}K=parseInt(K);if(L=="true"){return }if(K>=4){TJG.utils.setLocalStorage("tjg.bookmark.expired",true)}TJG.vars.version=TJG.vars.version?TJG.vars.version[0].replace(/[^\d_]/g,"").replace("_",".")*1:0;L=L=="null"?0:L*1;var A=document.createElement("div"),P;A.id="addToHome";A.style.cssText+="position:absolute;-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);";A.style.left="-9999px";A.className=(TJG.vars.isIPad?"ipad wide":"iphone");var D=Q.message;var I=(Q.arrow?'<span class="arrow"></span>':"");var O=[D,I].join("");A.innerHTML=O;document.body.appendChild(A);C=A;function B(){C.removeEventListener("webkitTransitionEnd",B,false);C.style.webkitTransitionProperty="-webkit-transform";C.style.webkitTransitionDuration="0.2s";if(N){clearInterval(M);M=setInterval(J,Q.iterations)}else{C.parentNode.removeChild(C)}}function J(){var R=new WebKitCSSMatrix(window.getComputedStyle(C,null).webkitTransform),S=TJG.vars.isIPad?window.scrollY-H:window.scrollY+window.innerHeight-H,T=TJG.vars.isIPad?window.scrollX-startX:window.scrollX+Math.round((window.innerWidth-C.offsetWidth)/2)-startX;if(S==R.m42&&T==R.m41){return }clearInterval(M);C.removeEventListener("webkitTransitionEnd",B,false);setTimeout(function(){C.addEventListener("webkitTransitionEnd",B,false);C.style.webkitTransform="translate3d("+T+"px,"+S+"px,0)"},0)}function E(){clearInterval(M);clearTimeout(N);N=null;C.removeEventListener("webkitTransitionEnd",B,false);var T=TJG.vars.isIPad?window.scrollY-H:window.scrollY+window.innerHeight-H,U=TJG.vars.isIPad?window.scrollX-startX:window.scrollX+Math.round((window.innerWidth-C.offsetWidth)/2)-startX,R="0.95",S="0";C.style.webkitTransitionProperty="-webkit-transform,opacity";switch(Q.animationOut){case"drop":if(TJG.vars.isIPad){S="0.4s";R="0";T=T+50}else{S="0.6s";T=T+C.offsetHeight+Q.bottomOffset+50}break;case"bubble":if(TJG.vars.isIPad){S="0.8s";T=T-C.offsetHeight-Q.bottomOffset-50}else{S="0.4s";R="0";T=T-50}break;default:S="0.8s";R="0"}C.addEventListener("webkitTransitionEnd",B,false);C.style.opacity=R;C.style.webkitTransitionDuration=S;C.style.webkitTransform="translate3d("+U+"px,"+T+"px,0)"}setTimeout(function(){var R;H=TJG.vars.isIPad?window.scrollY:window.innerHeight+window.scrollY;startX=TJG.vars.isIPad?window.scrollX:Math.round((window.innerWidth-C.offsetWidth)/2)+window.scrollX;C.style.top=TJG.vars.isIPad?H+Q.bottomOffset+"px":H-C.offsetHeight-Q.bottomOffset+"px";C.style.left=TJG.vars.isIPad?startX+(TJG.vars.version>=5?160:208)-Math.round(C.offsetWidth/2)+"px":startX+"px";switch(Q.animationIn){case"drop":if(TJG.vars.isIPad){R="0.6s";C.style.webkitTransform="translate3d(0,"+-(window.scrollY+Q.bottomOffset+C.offsetHeight)+"px,0)"}else{R="0.9s";C.style.webkitTransform="translate3d(0,"+-(H+Q.bottomOffset)+"px,0)"}break;case"bubble":if(TJG.vars.isIPad){R="0.6s";C.style.opacity="0";C.style.webkitTransform="translate3d(0,"+(H+50)+"px,0)"}else{R="0.6s";C.style.webkitTransform="translate3d(0,"+(C.offsetHeight+Q.bottomOffset+50)+"px,0)"}break;default:R="1s";C.style.opacity="0"}setTimeout(function(){C.style.webkitTransitionDuration=R;C.style.opacity="0.95";K=K+1;TJG.utils.setLocalStorage("tjg.bookmark.shown",K);C.style.webkitTransform="translate3d(0,0,0)";C.addEventListener("webkitTransitionEnd",B,false)},0);N=setTimeout(E,Q.lifespan)},Q.startDelay);window.addToHomeClose=E},homeInit:function(){var E=new $.jQTouch({slideSelector:"#jqt",});var K=350,L=250,A=700;var C=TJG.utils.getParam("register_device");if(TJG.vars.isIos||TJG.vars.isSafari){TJG.ui.showAddHomeDialog()}var M=TJG.utils.getLocalStorage("tjg.feat_review.expand");if(M=="true"){$(".feat_toggle").removeClass("collaspe");$(".feat_review").removeClass("min");$(".app_review").show()}var B=TJG.utils.getLocalStorage("tjg.repeat_visit");if(C.indexOf("true")!=-1){TJG.utils.centerDialog("#register_device");$("#register_device").fadeIn(K)}else{if(B!="true"){}}TJG.ui.loadRatings();function D(O,N){if(N=="right"){N="slideright"}else{N="slideleft"}E.goTo(O,N)}function I(){$("#home").bind("pageAnimationStart",function(O,N){if(N.direction=="out"){$("#home .content_wrapper").fadeOut("fast")}});$("#earn").bind("pageAnimationStart",function(O,N){if(N.direction=="out"){$("#earn .content_wrapper").fadeOut("fast")}});$("#more_games").bind("pageAnimationStart",function(O,N){if(N.direction=="out"){$("#more_games .content_wrapper").fadeOut("fast")}});$("#feat_app").bind("pageAnimationStart",function(O,N){if(N.direction=="out"){$("#feat_app .content_wrapper").fadeOut("fast")}});$("#home").bind("pageAnimationEnd",function(O,N){if(N.direction=="in"){$("#home .content_wrapper").fadeIn("fast")}});$("#earn").bind("pageAnimationEnd",function(O,N){if(N.direction=="in"){$("#earn .content_wrapper").fadeIn("fast")}});$("#more_games").bind("pageAnimationEnd",function(O,N){if(N.direction=="in"){$("#more_games .content_wrapper").fadeIn("fast")}});$("#feat_app").bind("pageAnimationEnd",function(O,N){if(N.direction=="in"){$("#feat_app .content_wrapper").fadeIn("fast")}});$(".get_offerwall_jsonp").each(function(){var N=0;$(this).click(function(){D("#earn","left");$("#earn_content").empty();var Q=$(this).attr("jsonp_url"),R=$(this).attr("id"),P=$(this).attr("app_name"),T=$(this).attr("currency");if(!TJG.appOfferWall[R]){TJG.appOfferWall[R]={}}TJG.appOfferWall[R]["jsonp_url"]=Q;var S='Complete any of the offers below to earn <span class="bold">'+T+'</span> for <span class="bold">'+P+"</span>";$("#app_title").html(S).show();if(Q){TJG.ui.showLoader();$.ajax({url:Q+"&callback=?",dataType:"json",timeout:15000,success:function(Z){TJG.ui.hideLoader();if(Z.OfferArray){var X=Z.OfferArray;offerOffset=X.length;if(Z.MoreDataAvailable){TJG.appOfferWall[R]["offers_left"]=Z.MoreDataAvailable}else{TJG.appOfferWall[R]["offers_left"]=0}TJG.appOfferWall[R]["offset"]=offerOffset;var V=TJG.ui.getOfferRow(X,T);var W=['<ul id="offerwall_id-',R,'">',V,"</ul>",];if(TJG.appOfferWall[R]["offers_left"]>0){W.push('<div class="more_button_wrapper"><div class="get_more_apps" app_id="'+R+'"><div class="get_more_apps_content">Load More</div></div></div>')}else{W.push('<div class="more_button_wrapper"><div class="back_to_top grey_button"><div class="grey_button_content">Back to Top</div></div></div>');$(".back_to_top").click(function(){TJG.utils.scrollTop()})}W=W.join("");$("#earn_content").html(W).fadeIn(K,function(){TJG.utils.loadImages(".offer_image_loader_wrapper")});var U=false;var Y=false;$(".get_more_apps").click(function(){if(U){return }$(".get_more_apps_content").html('<div class="image_loader"></div>');var b=$(this).attr("app_id");$(".load_more_loader").show();if(TJG.appOfferWall[b]["offers_left"]>0){var a=TJG.appOfferWall[b]["jsonp_url"];a=a+"&start="+TJG.appOfferWall[b]["offset"]+"&max=25&callback=?";U=true;$.ajax({url:a,dataType:"json",timeout:15000,success:function(f){if(f.OfferArray){var c=f.OfferArray;if(f.MoreDataAvailable){TJG.appOfferWall[b]["offers_left"]=f.MoreDataAvailable}else{TJG.appOfferWall[b]["offers_left"]=0}TJG.appOfferWall[b]["offset"]=TJG.appOfferWall[b]["offset"]+25;var e=TJG.ui.getOfferRow(c,T,N,true);$("#offerwall_id-"+b).append(e);var d=".offer_item_"+N;$.each($(d),function(h,g){$(g).fadeIn(K)});TJG.utils.loadImages(".offer_image_loader_wrapper");if(TJG.appOfferWall[b]["offers_left"]>0){$(".get_more_apps_content").html("Load More")}else{$(".more_button_wrapper").html('<div class="back_to_top grey_button"><div class="grey_button_content">Back to Top</div></div>');$(".back_to_top").click(function(){TJG.utils.scrollTop()})}}U=false},error:function(){var c=['<div class="center">There was an issue fetching more offers. Please try again.</div>'].join("");if(!Y){$("#offerwall_id-"+b).append(c).fadeIn(K)}Y=true;$(".get_more_apps_content").html("Load More");$(".load_more_loader").hide();U=false}});N++}})}},error:function(){TJG.ui.hideLoader();var U=['<div class="center">There was an issue. Please try again</div>'].join("");$("#earn_content").html(U).fadeIn(K);TJG.utils.scrollTop()}})}else{var O=['<div class="center">There was an issue. Please try again</div>'].join("");$("#earn_content").html(O).fadeIn(K);TJG.utils.scrollTop()}})})}function J(){$(".get_offerwall_jsonp").unbind("click");I()}function H(){$(".more_games_url").click(function(){D("#more_games","left");$("#recommended_games_button").addClass("dark_grey").removeClass("grey");$("#top_grossing_games_button").addClass("grey").removeClass("dark_grey");$("#top_grossing_games_button_arrow").hide();$("#recommended_games_button_arrow").show();if(TJG.moreAppOfferWall){$("#more_games_content").html(TJG.moreAppOfferWall).fadeIn(A,function(){TJG.utils.loadImages(".offer_image_loader_wrapper");TJG.ui.loadRatings()})}else{TJG.ui.showLoader();$.ajax({url:TJG.more_games_editor_picks,timeout:15000,success:function(N){TJG.moreAppOfferWall=N;TJG.ui.hideLoader();$("#more_games_content").html(N).fadeIn(K,function(){TJG.utils.loadImages(".offer_image_loader_wrapper");TJG.ui.loadRatings()})},error:function(){var N=["<div>There was an issue. Please try again</div>"].join("");$("#more_games_content").html(N).fadeIn(K)}})}})}function G(){$("#top_grossing_games_tab").click(function(){$("#top_grossing_games_button").addClass("dark_grey").removeClass("grey");$("#recommended_games_button").addClass("grey").removeClass("dark_grey");$("#recommended_games_button_arrow").hide();$("#top_grossing_games_button_arrow").show();$("#recommended_games_tab").unbind("click");$("#recommended_games_tab").click(function(){$("#recommended_games_button").addClass("dark_grey").removeClass("grey");$("#top_grossing_games_button").addClass("grey").removeClass("dark_grey");$("#top_grossing_games_button_arrow").hide();$("#recommended_games_button_arrow").show();if(TJG.moreAppOfferWall){$("#more_games_content").fadeOut(L,function(){$("#more_games_content").html(TJG.moreAppOfferWall).fadeIn(L,function(){TJG.utils.loadImages(".offer_image_loader_wrapper");TJG.ui.loadRatings()})})}});if(TJG.topAppOfferWall){$("#more_games_content").fadeOut(L,function(){$("#more_games_content").html(TJG.topAppOfferWall).fadeIn(A,function(){TJG.utils.loadImages(".offer_image_loader_wrapper");TJG.ui.loadRatings()})})}else{TJG.ui.showLoader();$.ajax({url:TJG.more_games_popular,timeout:15000,success:function(N){TJG.topAppOfferWall=N;TJG.ui.hideLoader();$("#more_games_content").fadeOut(L,function(){$("#more_games_content").html(N).fadeIn(L,function(){TJG.utils.loadImages(".offer_image_loader_wrapper");TJG.ui.loadRatings()})})},error:function(){var N=["<div>There was an issue. Please try again</div>"].join("");$("#more_games_content").fadeOut(L,function(){$("#more_games_content").html(N).fadeIn(L)})}})}})}function F(){$(".feat_app_url").click(function(){D("#feat_app","left")})}I();H();G();F()},loadRatings:function(){$(".offer_rating, .app_rating").each(function(H,F){var E=$(this).attr("rating");var D=[],A=5,G=0;if(E){E=parseFloat(E)}for(var C=1;C<=5;C++){var B="star off";if(E>=C){B="star on";G++}else{if(E>G){B="star half";G++}}D.push('<span class="',B,'"></span>')}$(this).html(D.join("")).fadeIn("slow")})}};(function(B,A){TJG.onload={removeLoader:function(){TJG.ui.hideLoader(250,function(){$("#jqt").fadeTo(250,1)})},loadEvents:function(){$(".close_dialog").click(function(){TJG.ui.removeDialogs();TJG.repositionDialog=[]});$("#sign_up, #sign_up_form").click(function(){TJG.utils.centerDialog("#sign_up_dialog");TJG.repositionDialog=["#sign_up_dialog"];TJG.ui.showRegister()});$("#how_works").click(function(){TJG.utils.centerDialog("#how_works_dialog");TJG.repositionDialog=["#how_works_dialog"];$("#how_works_dialog").fadeIn(350)});$(".top_nav_bar").click(function(){TJG.utils.centerDialog("#my_account_dialog");TJG.repositionDialog=["#my_account_dialog"];$("#my_account_dialog").fadeIn(350)});$(".my_account_url").click(function(){$("#my_account_dialog").fadeOut(350,function(){TJG.utils.centerDialog("#my_account_dialog_content");TJG.repositionDialog=["#my_account_dialog_content"];$("#my_account_dialog_content").fadeIn(350)})});$(".feat_toggle").click(function(){if($(this).hasClass("collaspe")){$(this).removeClass("collaspe");$(".feat_review").removeClass("min");$(".app_review").show();TJG.utils.setLocalStorage("tjg.feat_review.expand",true)}else{$(this).addClass("collaspe");$(".feat_review").addClass("min");$(".app_review").hide();TJG.utils.setLocalStorage("tjg.feat_review.expand",false)}})},checkFlashMessages:function(){if($("#flash_error").length>0){TJG.utils.centerDialog("#flash_error");$("#flash_error").fadeIn();TJG.repositionDialog=["#flash_error"]}}};TJG.init=function(){if(TJG.vars.isIos){TJG.utils.hideURLBar()}for(var C in TJG.onload){TJG.onload[C]()}};B.addEventListener("load",TJG.init,false)})(this,document);